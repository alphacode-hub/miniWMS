{% extends "base.html" %}
{% block title %}Orbion Inbound - Recepciones{% endblock %}

{% block content %}
<div class="w-full max-w-5xl mx-auto px-4 py-4 space-y-4">

    <!-- Header / Branding Orbion -->
    <div class="flex items-center justify-between gap-3">
        <div>
            <h1 class="text-xl font-bold text-slate-900">
                Orbion Inbound
            </h1>
            <p class="text-xs text-slate-500">
                Panel de recepciones: contenedores, camiones y pallets.
            </p>
        </div>
        <div class="flex items-center gap-2">
            <a href="/inbound/analytics"
               class="inline-flex items-center justify-center px-3 py-2 rounded-lg text-xs font-semibold
                      border border-slate-200 text-slate-700 bg-white hover:bg-slate-50">
                Ver analítica
            </a>
            <a href="/inbound/nuevo"
               class="inline-flex items-center justify-center px-3 py-2 rounded-lg text-xs font-semibold
                      bg-indigo-600 text-white hover:bg-indigo-700
                      focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                Nueva recepción
            </a>
        </div>
    </div>


    <!-- Filtros (placeholder) -->
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
        <select class="w-full border border-slate-200 rounded-lg px-3 py-2 text-xs">
            <option value="">Estado: todos</option>
            <option value="PRE_REGISTRADO">Pre-registrado</option>
            <option value="EN_ESPERA">En espera</option>
            <option value="EN_DESCARGA">En descarga</option>
            <option value="EN_CONTROL_CALIDAD">En control de calidad</option>
            <option value="CERRADO">Cerrado</option>
        </select>
        <input type="date"
               class="w-full border border-slate-200 rounded-lg px-3 py-2 text-xs"
               placeholder="Desde">
        <input type="date"
               class="w-full border border-slate-200 rounded-lg px-3 py-2 text-xs"
               placeholder="Hasta">
    </div>

    <!-- Lista / cards mobile-first -->
    <div class="space-y-2">
        {% if recepciones %}
        {% for r in recepciones %}
        <a href="/inbound/{{ r.id }}"
           class="block rounded-xl border border-slate-200 bg-white px-3 py-2
                          hover:border-indigo-400 hover:shadow-sm transition">
            <div class="flex items-center justify-between gap-2">
                <div class="min-w-0">
                    <p class="text-xs font-semibold text-slate-900 truncate">
                        {{ r.codigo }} · {{ r.proveedor }}
                    </p>
                    <p class="text-[11px] text-slate-500 truncate">
                        {{ r.referencia_externa or 'Sin referencia' }}
                    </p>
                </div>
                <div class="flex flex-col items-end gap-1">
                    <span class="inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-medium
                                {% if r.estado == 'CERRADO' %}
                                    bg-emerald-50 text-emerald-700
                                {% elif r.estado == 'EN_DESCARGA' %}
                                    bg-indigo-50 text-indigo-700
                                {% elif r.estado == 'EN_CONTROL_CALIDAD' %}
                                    bg-amber-50 text-amber-800
                                {% else %}
                                    bg-slate-50 text-slate-600
                                {% endif %}">
                        {{ r.estado.replace('_', ' ') }}
                    </span>
                    <p class="text-[10px] text-slate-400">
                        {{ r.creado_en.strftime('%d-%m-%Y %H:%M') if r.creado_en else '' }}
                    </p>
                </div>
            </div>
            {% if r.contenedor or r.patente_camion %}
            <p class="mt-1 text-[11px] text-slate-500">
                {% if r.contenedor %}Contenedor: {{ r.contenedor }}{% endif %}
                {% if r.contenedor and r.patente_camion %} · {% endif %}
                {% if r.patente_camion %}Patente: {{ r.patente_camion }}{% endif %}
            </p>
            {% endif %}
        </a>
        {% endfor %}
        {% else %}
        <div class="rounded-xl border border-dashed border-slate-200 bg-slate-50 px-4 py-6 text-center">
            <p class="text-xs font-semibold text-slate-600">
                Aún no tienes recepciones inbound.
            </p>
            <p class="mt-1 text-[11px] text-slate-500">
                Comienza creando tu primera recepción para controlar tus descargas con Orbion Inbound.
            </p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
