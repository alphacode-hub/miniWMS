{% extends "base.html" %}
{% block title %}Movimientos - Mini WMS{% endblock %}

{% block content %}
<div class="w-full max-w-md mx-auto px-4 py-4">
    <div class="bg-white shadow-lg rounded-2xl p-5 space-y-4">

        <!-- Header -->
        <div class="flex items-center justify-between">
            <div>
                <h1 class="text-lg font-bold text-slate-900">
                    Movimientos
                </h1>
                <p class="text-xs text-slate-500">
                    Entradas y salidas recientes de {{ user.negocio }}.
                </p>
            </div>
            <a href="/dashboard"
               class="hidden sm:inline-flex items-center text-[11px] text-slate-600 hover:underline">
                ← Dashboard
            </a>
        </div>

        <!-- Acciones rápidas -->
        <div class="flex items-center justify-between gap-2">
            <a href="/movimientos/entrada"
               class="inline-flex-1 inline-flex items-center justify-center px-3 py-1.5 rounded-xl text-xs font-semibold
                      bg-emerald-50 text-emerald-700 border border-emerald-100 hover:bg-emerald-100">
                + Entrada
            </a>
            <a href="/movimientos/salida"
               class="inline-flex-1 inline-flex items-center justify-center px-3 py-1.5 rounded-xl text-xs font-semibold
                      bg-red-50 text-red-700 border border-red-100 hover:bg-red-100">
                - Salida
            </a>
            <a href="/transferencia"
               class="hidden sm:inline-flex items-center justify-center px-3 py-1.5 rounded-xl text-xs font-semibold
                      bg-slate-50 text-slate-700 border border-slate-200 hover:bg-slate-100">
                Transferir
            </a>
        </div>

        <!-- Historial -->
        {% if movimientos|length == 0 %}
        <p class="text-xs text-slate-500 mt-2">
            Aún no tienes movimientos registrados.
        </p>
        {% else %}
        <div class="mt-2 max-h-80 overflow-y-auto border border-slate-200 rounded-xl">
            <table class="w-full text-xs">
                <tbody class="divide-y divide-slate-100">
                    {% for m in movimientos %}
                    <tr class="hover:bg-slate-50">
                        <td class="px-3 py-2 align-top">
                            <div class="flex items-center justify-between">
                                <span class="text-[11px] font-semibold text-slate-800">
                                    {{ m.tipo|capitalize }} · {{ m.producto_nombre }}
                                </span>
                                <span class="text-[10px] text-slate-400">
                                    {{ m.fecha.strftime("%d-%m-%Y") }}
                                </span>
                            </div>
                            <div class="text-[11px] text-slate-500">
                                {{ m.zona_nombre }} · {{ m.ubicacion_nombre }} · {{ m.slot_nombre }}
                            </div>
                            <div class="text-[10px] text-slate-400">
                                Cantidad: {{ m.cantidad }}
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% endif %}

        <a href="/dashboard"
           class="block mt-4 text-center text-sm text-slate-500 sm:hidden">
            ← Volver al dashboard
        </a>
    </div>
</div>
{% endblock %}
