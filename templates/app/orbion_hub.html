{% extends "base/base_app.html" %}

{% block title %}ORBION · Plataforma{% endblock %}

{% block page_header %}
{# En mobile ocultamos este header para no recargar la barra superior #}
<div class="hidden sm:flex items-center justify-between gap-4">
    <div class="space-y-1 min-w-0">
        <h1 class="text-sm sm:text-lg font-semibold text-slate-100 tracking-tight truncate">
            Plataforma ORBION
        </h1>
        <p class="text-xs text-slate-400 leading-snug max-w-xl">
            Accede a los módulos activos de tu organización.
            No todo está habilitado, pero todo está en órbita.
        </p>
    </div>
</div>
{% endblock %}



{% block content %}
<div class="space-y-6 sm:space-y-8">

    {# =========================
    HEADER SOLO MOBILE
    ========================= #}
    <div class="sm:hidden space-y-1">
        <h1 class="text-base font-semibold text-slate-100 tracking-tight">
            Plataforma ORBION
        </h1>
        <p class="text-[11px] text-slate-400 leading-snug max-w-xs">
            Accede a los módulos activos de tu organización.
            No todo está habilitado, pero todo está en órbita.
        </p>
    </div>

    <!-- ========================= -->
    <!-- GRID DE MÓDULOS ORBION   -->
    <!-- ========================= -->
    <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-5">

        {% for m in dashboard_modules %}
        <div class="
            relative rounded-2xl
            border border-slate-800
            bg-slate-900/50
            p-4 sm:p-5 flex flex-col gap-3 sm:gap-4
            hover:border-cyan-400/40
            transition
        ">

            <!-- Glow sutil -->
            <div class="absolute inset-0 rounded-2xl bg-cyan-500/5 blur-xl pointer-events-none"></div>

            <!-- Header -->
            <div class="relative flex items-start justify-between gap-3">
                <div>
                    <h2 class="text-sm font-semibold text-slate-100">
                        {{ m.label }}
                    </h2>
                    <p class="mt-1 text-[11px] sm:text-xs text-slate-400">
                        {{ m.description }}
                    </p>
                </div>

                <!-- Badge -->
                <span class="
                    shrink-0 text-[10px] px-2 py-1 rounded-full border
                    {% if m.locked %}
                        border-slate-700 text-slate-400
                    {% else %}
                        border-emerald-500/60 text-emerald-300
                    {% endif %}
                ">
                    {{ m.badge }}
                </span>
            </div>

            <!-- CTA -->
            <div class="mt-auto flex justify-end pt-3 sm:pt-4 relative">
                {% if not m.locked %}
                <a href="{{ m.url }}"
                   class="
                        inline-flex items-center gap-2
                        text-xs font-medium
                        px-4 py-2 rounded-full
                        bg-[#00E4FF]
                        text-slate-900
                        hover:bg-cyan-300
                        transition
                    ">
                    Abrir módulo
                </a>
                {% else %}
                <button type="button"
                        class="
                            inline-flex items-center gap-2
                            text-xs font-medium
                            px-4 py-2 rounded-full
                            border border-cyan-500/50
                            text-cyan-300
                            hover:bg-cyan-500/10
                            transition
                        ">
                    Incrementar plan
                </button>
                {% endif %}
            </div>

        </div>
        {% endfor %}

    </div>

    <!-- ========================= -->
    <!-- CONSOLA SUPERADMIN        -->
    <!-- ========================= -->
    {% if show_superadmin_console %}
    <div class="border-t border-slate-800 pt-5 sm:pt-6 space-y-3">
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-2">
            <h3 class="text-[11px] sm:text-xs font-semibold uppercase tracking-wide text-slate-400">
                Consola Global ORBION
            </h3>
            <span class="text-[10px] text-slate-500">
                Visible solo para superadmin
            </span>
        </div>

        <a href="/superadmin/dashboard"
           class="
                inline-flex items-center gap-2
                text-xs font-medium
                px-4 py-2 rounded-full
                border border-slate-700
                text-slate-200
                hover:bg-slate-800/70
                transition
            ">
            Ir a consola superadmin
        </a>
    </div>
    {% endif %}

</div>
{% endblock %}
